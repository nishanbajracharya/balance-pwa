(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){},105:function(e,t,n){},107:function(e,t,n){},109:function(e,t,n){},111:function(e,t,n){},113:function(e,t,n){},115:function(e,t,n){},117:function(e,t,n){},119:function(e,t,n){},121:function(e,t,n){},123:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(44),o=n.n(c),l=n(3),i=n(4),s=n(7),u=n(5),d=n(8),p=n(6),m=n(47),f=n(13),h=n(48),v=n.n(h),b=n(38),y=n(9),E=n(49),O=n.n(E),g={lastSynced:null},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;switch((arguments.length>1?arguments[1]:void 0).type){case"SYNC_ACCOUNT":return Object(y.a)({},e,{lastSynced:O()(new Date,"Do MMM YYYY hh:mm A")});default:return e}},C=n(30),N=n(16),w=n(27),x=n.n(w),k=n(36),S=n.n(k),A={current:0,initial:0,expenses:0,data:{},list:[]},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.list.filter(function(t){return S()(e.data[t].addedDate)}),a=n[n.length-1];return n.length?e.data[a].value:t},B={data:{},list:[]},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EXPENSE":var n=x()();return Object(y.a)({},e,{data:Object(y.a)({},e.data,Object(N.a)({},n,Object(y.a)({},t.payload,{addedDate:(new Date).toISOString()}))),list:[n].concat(Object(C.a)(e.list))});default:return e}},T=Object(f.b)({sync:j,balance:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RESET_INITIAL_BALANCE_FOR_MONTH":return Object(y.a)({},e,{initial:D(e,0)});case"ADD_BALANCE":var n=x()(),a=e.list.filter(function(t){return S()(e.data[t].addedDate)});return Object(y.a)({},e,{current:e.current+t.payload.value,initial:D(e,t.payload.value),data:Object(y.a)({},e.data,Object(N.a)({},n,Object(y.a)({},t.payload,{addedDate:(new Date).toISOString()}))),list:[n].concat(Object(C.a)(a))});case"ADD_EXPENSE":return Object(y.a)({},e,{expenses:e.expenses+t.payload.value,current:e.current-t.payload.value});default:return e}},expense:_}),R={key:"root",storage:v.a},I=Object(b.a)(R,function(e,t){return"SYNC_ACCOUNT"===t.type&&(e=atob(t.payload.code)),T(e,t)}),P=Object(f.c)(I,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),L=Object(b.b)(P),M=n(127),Y=n(126),q=n(28),U=n.n(q),V=n(50),W=n.n(V),F=n(14),X=n.n(F),z=n(128),H="/",J="/sync",$="/expense",G="/expense/add",K="/balance/add";function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Z=r.a.createElement("path",{d:"M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"}),ee=function(e){return r.a.createElement("svg",Q({viewBox:"0 0 512 512"},e),Z)};n.p;function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var ne=r.a.createElement("path",{d:"M492 257.1c-2.6-2.6-6-4-9.6-4-3.6 0-7 1.4-9.6 4l-13 13c4.3-61.8-19.5-122.5-65.3-165C356.9 70.2 307.7 51 256.1 51c-26.7 0-52.8 5.1-77.4 15.1-25.5 10.4-48.3 25.6-67.7 45.3-13.2 13.4-24.6 28.5-33.6 44.8-1.9 3.4-2.3 7.4-1.2 11.1 1.1 3.7 3.8 6.8 7.2 8.5 2 1 4.2 1.5 6.4 1.5 5.2 0 9.9-2.8 12.4-7.3 7.9-14.3 17.8-27.5 29.4-39.1 16.8-16.8 36.3-29.8 58.1-38.7 21.1-8.6 43.4-12.9 66.2-12.9 22.9 0 45.2 4.3 66.3 12.9 21.8 8.9 41.4 21.9 58.2 38.8 20.3 20.4 35.4 45.6 43.8 73 7 22.9 9.2 47.3 6.6 71.2l-18.9-18.5c-2.5-2.4-5.8-3.8-9.3-3.8-3.5 0-6.9 1.4-9.4 3.9-5.2 5.2-5.2 13.6 0 18.8l42.8 42.9c1.9 1.9 4.4 2.9 7 2.9 2.6 0 5.1-1 7-2.9l42.1-42.2c5.2-5.3 5.2-13.9-.1-19.2zM428.6 335.9c-2-1-4.2-1.5-6.4-1.5-5.2 0-9.9 2.8-12.4 7.3-7.9 14.3-17.8 27.5-29.4 39.1-16.8 16.8-36.3 29.9-58.2 38.7-21.1 8.6-43.4 12.9-66.3 12.9s-45.2-4.3-66.2-12.9c-21.8-8.9-41.4-21.9-58.2-38.7-37.6-37.8-56-90.9-50.3-143.9l18.4 18.5c2.4 2.4 5.6 3.7 9 3.7 3.4 0 6.6-1.3 9-3.7l1.3-1.3c4.9-4.9 4.9-13 0-17.9l-42.9-43c-1.9-1.9-4.4-2.9-7-2.9-2.6 0-5.1 1-7 2.9l-42 42.3c-5.3 5.3-5.3 13.9 0 19.2 2.6 2.6 6 4 9.6 4 3.6 0 7-1.4 9.6-4l13-13.1c-1.8 25.8 1.3 52 9 76.5 9.9 31.4 26.8 59.3 50.3 82.8 19.5 19.6 42.2 34.7 67.6 45.1 24.5 10 50.4 15 76.9 15 26.5 0 52.4-5.1 76.9-15 25.4-10.3 48.1-25.5 67.6-45.1 13.5-13.5 25-28.8 34.2-45.4 1.9-3.4 2.3-7.4 1.2-11.1-1.2-3.7-3.8-6.8-7.3-8.5z"}),ae=function(e){return r.a.createElement("svg",te({viewBox:"0 0 512 512"},e),ne)},re=(n.p,Object(z.a)(function(e){var t=e.history,n=e.sync,a=void 0!==n&&n,c=e.back,o=void 0!==c&&c,l=e.title,i=void 0===l?"Balance":l,s=e.onRequestClose,u=void 0===s?function(e){return e}:s;return r.a.createElement("div",{className:"appbar"},o&&r.a.createElement(ee,{onClick:u}),r.a.createElement("p",{className:X()("app-title",{back:o,sync:a})},i),a&&r.a.createElement(ae,{onClick:function(){return t.push(J)}}))})),ce=function(e){var t=e.label,n=e.primary,a=e.secondary,c=e.className,o=e.onClick,l=void 0===o?function(e){return e}:o;return r.a.createElement("button",{onClick:l,className:X()("button",c,{primary:n,secondary:a})},t)},oe=n(17),le=n(52),ie=n.n(le),se=n(53),ue=n(29),de=n.n(ue),pe=function(e){var t=e.value,n=void 0===t?0:t,a=e.className,c=void 0===a?"":a,o=e.title,l=void 0===o?"Balance":o;return r.a.createElement("div",{className:X()("card",c)},r.a.createElement("p",{className:"card-title"},l),r.a.createElement("p",{className:"card-value"},"Rs ",de()(n).format("0,0")))},me=Object(se.virtualize)(ie.a);var fe=Object(p.b)(function(e){return{balance:e.balance}})(function(e){var t=e.balance;return r.a.createElement(me,{className:"card-swipe",slideRenderer:function(e){return function(e,t){var n=e.index,a=e.key;switch(Object(oe.mod)(n,3)){case 0:return r.a.createElement(pe,{key:a,title:"Balance",value:t.current,className:"balance"});case 1:return r.a.createElement(pe,{key:a,title:"Expenses",value:t.expenses,className:"expenses"});case 2:return r.a.createElement(pe,{key:a,title:"Initial",value:t.initial,className:"initial"});default:return null}}(e,t)}})}),he=function(e){var t=e.title,n=void 0===t?"":t,a=e.value,c=void 0===a?"":a;return r.a.createElement("li",{className:"expense-item"},r.a.createElement("span",{className:"expense-title"},n),r.a.createElement("span",{className:"expense-value"},"Rs ",de()(c).format("0,0")))},ve=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=W()(new Date);U()(e,new Date)&&this.props.resetInitialBalance()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(re,{sync:!0}),r.a.createElement(fe,null),r.a.createElement("p",{className:"expense-section-title"},"Recent Expenses"),r.a.createElement("ul",{className:"expense-section"},this.props.expense.list.slice(0,5).map(function(t,n){return r.a.createElement(he,{key:n,title:e.props.expense.data[t].title,value:e.props.expense.data[t].value})}),0===this.props.expense.list.length&&r.a.createElement("li",{className:"expense-item center empty"},"Nothing to show")),this.props.expense.list.length>0&&r.a.createElement("p",{className:"expense-section-more",onClick:function(){return e.props.history.push($)}},"more"),r.a.createElement("div",{className:"button-container"},r.a.createElement(ce,{primary:!0,label:"Add Expense",onClick:function(){return e.props.history.push(G)}}),r.a.createElement(ce,{secondary:!0,label:"Add Balance",onClick:function(){return e.props.history.push(K)}})))}}]),t}(r.a.PureComponent),be=Object(p.b)(function(e){return{expense:e.expense}},function(e){return{resetInitialBalance:function(){return e({type:"RESET_INITIAL_BALANCE_FOR_MONTH"})}}})(ve),ye=n(58),Ee=function(e){var t=e.multiline,n=Object(ye.a)(e,["multiline"]);return t?r.a.createElement("textarea",n):r.a.createElement("input",n)},Oe=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).onFocus=function(t){e.props.onFocus(t),e.setState({focused:!0,touched:!0})},e.onBlur=function(t){e.props.onBlur(t),e.setState({focused:!1})},e.onInput=function(t){e.props.onInput(t),e.props.onValueChange(t.target.value),e.setState({edited:!0,value:t.target.value})},e.state={edited:!1,focused:!1,touched:!1,value:void 0},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(Ee,{onBlur:this.onBlur,type:this.props.type,onFocus:this.onFocus,onInput:this.onInput,value:this.state.value,multiline:this.props.multiline,placeholder:this.props.placeholder,className:X()("input",Object(N.a)({},this.props.activeClassName,this.state.focused))})}}]),t}(r.a.PureComponent);Oe.defaultProps={onBlur:function(e){return e},onFocus:function(e){return e},onInput:function(e){return e},onValueChange:function(e){return e},activeClassName:"active"};var ge=n(54),je=n.n(ge),Ce=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).handleClose=function(){e.setState({close:!0});var t=setTimeout(function(){e.props.onRequestClose(),clearTimeout(t)},140)},e.state={close:!1},e.handleClose=je()(e.handleClose,150,{leading:!0,trailing:!1}),e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:X()("fullscreen-page",{close:this.state.close})},r.a.createElement(re,{back:!0,onRequestClose:this.handleClose,title:this.props.title}),this.props.children)}}]),t}(r.a.Component);Ce.defaultProps={onRequestClose:function(e){return e}};var Ne=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).copyToClipboard=function(e){var t=document.createElement("textarea");t.innerText=e;var n=document.body;n.appendChild(t),t.select(),document.execCommand("copy"),n.removeChild(t)},e.state={code:void 0},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Ce,{title:"Sync Your Balance",onRequestClose:function(){return e.props.history.goBack()}},r.a.createElement("p",{className:"sync-title"},"Sync your account to keep track of your balance across multiple devices"),r.a.createElement("div",{className:"sync-code"},this.props.code),r.a.createElement("p",{className:"sync-message center"},"This is your balance account signature. Paste this into another device to sync with it."),r.a.createElement("div",{className:"full-width"},r.a.createElement(ce,{label:"Copy Signature",primary:!0,onClick:function(){return e.copyToClipboard(e.props.code)}})),r.a.createElement("p",{className:"sync-or"},"OR"),r.a.createElement("div",{className:"full-width"},r.a.createElement(Oe,{placeholder:"Paste your account signature here",multiline:!0,onValueChange:function(t){return e.setState({code:t})}}),r.a.createElement(ce,{label:"Sync Balance",primary:!0,onClick:function(){return e.state.code&&e.props.sync(e.state.code)}})),r.a.createElement("p",{className:"sync-message center"},"Last Synced: ",this.props.lastSynced))}}]),t}(r.a.PureComponent),we=Object(p.b)(function(e){return{code:btoa(JSON.stringify(e)),lastSynced:e.sync.lastSynced||"Never"}},function(e){return{sync:function(t){return e(function(){return{type:"SYNC_ACCOUNT",payload:{code:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}}}(t))}}})(Ne),xe=n(55),ke=n.n(xe),Se=n(37),Ae=n.n(Se),De=n(56),Be=n.n(De),_e=n(57),Te=n.n(_e),Re={today:"Today",before:"Before",yesterday:"Yesterday",twoDaysAgo:"Two Days Ago"},Ie=function(e){var t=e.title,n=e.list,a=e.data;return r.a.createElement("div",{className:"expense-section-view"},r.a.createElement("p",{className:"expense-section-title center"},t),r.a.createElement("ul",null,n.map(function(e){return r.a.createElement(he,{title:a[e].title,value:a[e].value})})))},Pe=Object(p.b)(function(e){return{data:e.expense.data,segments:function(){var t=e.expense.data,n=e.expense.list,a=Ae()(new Date,2),r=Ae()(new Date,3),c=n.filter(function(e){return ke()(t[e].addedDate)}),o=n.filter(function(e){return Te()(t[e].addedDate)}),l=n.filter(function(e){return U()(t[e].addedDate,a)}),i={today:c,before:n.filter(function(e){return Be()(t[e].addedDate,r)}),yesterday:o,twoDaysAgo:l},s=["today","yesterday","twoDaysAgo","before"].filter(function(e){return i[e].length});return Object(y.a)({},i,{list:s})}()}})(function(e){var t=e.data,n=e.history,a=e.segments;return r.a.createElement(Ce,{onRequestClose:function(){return n.goBack()},title:"Expense"},r.a.createElement("div",{className:"scroll-content"},a.list.map(function(e){return r.a.createElement(Ie,{title:Re[e],list:a[e],data:t})})))}),Le=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).handleAddExpense=function(t,n){t&&e.props.addExpense(t,n),e.fs.handleClose()},e.state={value:0,title:void 0},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Ce,{ref:function(t){return e.fs=t},onRequestClose:function(){return e.props.history.goBack()},title:"Add Expense"},r.a.createElement("div",{className:"input-container"},r.a.createElement("p",{className:"input-container-title"},"Add what you spent on and your expenses."),r.a.createElement(Oe,{type:"number",placeholder:"How much did you spend?",onValueChange:function(t){return e.setState({value:parseInt(t)})}}),r.a.createElement(Oe,{placeholder:"What did you spend on?",onValueChange:function(t){return e.setState({title:t})}})),r.a.createElement("div",{className:"button-container"},r.a.createElement(ce,{primary:!0,label:"Submit",onClick:function(){return e.handleAddExpense(e.state.value,e.state.title)}}),r.a.createElement(ce,{secondary:!0,label:"Cancel",onClick:function(){return e.fs.handleClose()}})))}}]),t}(r.a.PureComponent),Me=Object(p.b)(function(e){return{balance:e.balance}},function(e){return{addExpense:function(t,n){return e(function(e){return{type:"ADD_EXPENSE",payload:{value:e,title:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Expense"}}}(t,n))}}})(Le),Ye=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).handleAddBalance=function(t){t&&e.props.addBalance(t),e.fs.handleClose()},e.state={value:0},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Ce,{ref:function(t){return e.fs=t},onRequestClose:function(){return e.props.history.goBack()},title:"Add Balance"},r.a.createElement("div",{className:"input-container"},r.a.createElement("p",{className:"input-container-title"},"Add some amount to your current balance."),r.a.createElement(Oe,{type:"number",placeholder:"How much do you want to add?",onValueChange:function(t){return e.setState({value:parseInt(t)})}}),r.a.createElement(he,{title:"Current Balance",value:this.props.balance.current}),r.a.createElement(he,{title:"New Balance",value:this.props.balance.current+this.state.value})),r.a.createElement("div",{className:"button-container"},r.a.createElement(ce,{primary:!0,label:"Submit",onClick:function(){return e.handleAddBalance(e.state.value)}}),r.a.createElement(ce,{secondary:!0,label:"Cancel",onClick:function(){return e.fs.handleClose()}})))}}]),t}(r.a.PureComponent),qe=Object(p.b)(function(e){return{balance:e.balance}},function(e){return{addBalance:function(t){return e(function(e){return{type:"ADD_BALANCE",payload:{value:e,title:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Balance"}}}(t))}}})(Ye),Ue=function(){return r.a.createElement(M.a,null,r.a.createElement("div",{className:"route-container"},r.a.createElement(Y.a,{path:H,component:be}),r.a.createElement(Y.a,{path:J,component:we}),r.a.createElement(Y.a,{path:$,component:Pe}),r.a.createElement(Y.a,{path:G,component:Me}),r.a.createElement(Y.a,{path:K,component:qe})))},Ve=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{store:P},r.a.createElement(m.a,{loading:null,persistor:L},r.a.createElement(Ue,null)))}}]),t}(a.Component),We=(n(103),n(105),n(107),n(109),n(111),n(113),n(115),n(117),n(119),n(121),n(123),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Fe(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(Ve,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/balance-pwa",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/balance-pwa","/service-worker.js");We?(function(e,t){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Fe(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Fe(t,e)})}}()},60:function(e,t,n){e.exports=n(125)}},[[60,2,1]]]);
//# sourceMappingURL=main.f8d952ab.chunk.js.map